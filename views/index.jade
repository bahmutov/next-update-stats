extends layout

block content
  h1= title
  p.
    #{description}.
    Helps you decide if upgrading a dependency is likely to succeed.

  p Use with <a href="https://npmjs.org/package/next-update">next-update</a> dependency upgrade checker.

  h2 Module update statistics

  div(ng-controller="next-update-stats-controller")
    p See global upgrade statistics for a package
      input(type="text", placeholder="package name", ng-model="packageName"
        title="Enter package module to see update statistics")
      button.btn.btn-default(ng-click="loadStats()" title="click to search") Load

    table.table.table-condensed.table-bordered
      thead
        tr
          th(ng-repeat="version in header") {{version}}
      tbody
        tr(ng-repeat="row in info")
          td(ng-repeat="update in row track by $index",
            title="{{$first ? 'Updating from version ' + update : update ? update.success + ' successful, ' + update.failure + ' failed' : 'No information available'}}").
            {{$first ? update : (update.probability|percent:0) }}

  h2 GET routes

  :markdown
    `/package/name`

    returns all statistics for given package, [example](/package/lodash)

    `/package/name/from version/to version`

    returns statistics for updating package from and to specific version,
    [example](/package/lodash/1.0.0/2.4.0) The versions should be `x.y.z` strings.

    `/version`

    returns #{name} server version
